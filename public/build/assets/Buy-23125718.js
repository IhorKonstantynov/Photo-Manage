import{_ as I}from"./AuthenticatedLayout-528906eb.js";import{T as j,r as u,f as F,a as i,o as _,c as v,w as a,d as e,n as l,p as M,D as b,k as P,b as d,G as T,K as H}from"./app-ff6ec338.js";import"./themeOverrides-9d5c4a9b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-9a120b43.js";import"./Copy-ca33d561.js";import"./TextInput-8530188a.js";import"./PrimaryButton-2e8ef213.js";const V={class:"max-w-2xl mx-auto text-center"},$=e("h2",{class:"text-xl font-bold lg:text-2xl text-primary"},"Looks like its working will refresh page in 15 mins.",-1),z={class:"pb-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},D={class:"flex flex-wrap items-stretch justify-center sm:-mx-4"},L={class:"mb-8 px-2 sm:px-4 w-4/5 md:w-3/5 lg:w-2/5 xl:w-1/3 lg:mb-0"},U={class:"h-full flex flex-col p-6 space-y-6 rounded shadow sm:p-8 bg-white border border-solid border-gray-300"},G=e("div",{class:"space-y-3"},[e("div",null,[e("h2",{class:"text-sm sm:text-md lg:text-lg font-bold text-gray-600 leading-5 md:leading-4"}," 40 More Headshots - Only $9.99 ")])],-1),K={key:0},q=e("div",{id:"card-errors",class:"mt-[0_!important] px-[15px] pt-1 text-red-600 font-sm",role:"alert"},null,-1),A=e("div",{class:"flex justify-center"},[e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/visa.png",alt:"visa"}),e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/mastercard.png",alt:"mastercard"}),e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/jcb.png",alt:"jcb"}),e("img",{class:"w-10",src:"/imgs/credit_cards/american-express.png",alt:"american-express"})],-1),J={class:"text-center"},se={__name:"Buy",props:{intent:{type:Object},stripe_pk:{type:String},isPayment:{type:Boolean,default:!1},message:String,photoId:Number},setup(c){const o=c,f=j({token:""}),r=u(!1),g=u(null),n=u(o.isPayment),x=window.Stripe(o.stripe_pk),w=x.elements(),k={base:{color:"#32325d",colorPrimary:"#6366f1",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},m=w.create("card",{style:k});function C(t){const s=document.getElementById("card-errors");t.error?s.innerText=t.error.message:s.innerText=""}F(()=>{m.mount(g.value),m.on("change",t=>{C(t)})});const B=async()=>{if(r.value=!0,n.value)f.transform(t=>({...t,token:null})).post(route("charge.payMore",o.photoId),{onFinish:()=>{r.value=!1,document.getElementById("card-errors").innerHTML=o.message}});else{const t=o.intent.client_secret,s=await x.confirmCardSetup(t,{payment_method:{type:"card",card:m,billing_details:{name:H().props.auth.user.name}}});s.error?r.value=!1:(console.log("stripe submit success."),f.transform(p=>({...p,token:s.setupIntent.payment_method})).post(route("charge.payMore",o.photoId),{onFinish:()=>{r.value=!1}}))}},h=t=>{n.value=t};return(t,s)=>{const p=i("n-alert"),y=i("n-radio"),S=i("n-button"),N=i("n-text");return _(),v(I,null,{header:a(()=>[e("div",V,[$,c.message?(_(),v(p,{key:0,title:"Card Error!",type:"error",closable:""},{default:a(()=>[l(M(c.message),1)]),_:1})):b("",!0)])]),default:a(()=>[e("div",z,[e("div",O,[e("div",D,[e("div",L,[e("div",U,[G,c.isPayment?(_(),P("div",K,[d(y,{checked:n.value,value:!0,name:"card-option",onChange:s[0]||(s[0]=E=>h(!0))},{default:a(()=>[l(" Use previous card. ")]),_:1},8,["checked"]),d(y,{checked:!n.value,value:!1,name:"card-option",onChange:s[1]||(s[1]=E=>h(!1))},{default:a(()=>[l(" Use new card. ")]),_:1},8,["checked"])])):b("",!0),e("div",{class:T(n.value?"hidden":"")},[e("div",{ref_key:"card",ref:g,class:"p-2.5 rounded-md border-2 border-solid"},null,512),q],2),d(S,{type:"button",loading:r.value,class:"bg-primary w-full text-white font-semibold",color:"#FF6E2B",size:"large",onClick:B},{default:a(()=>[l("Pay Now ")]),_:1},8,["loading"]),A,e("div",J,[d(N,{class:"italic text-gray-400"},{default:a(()=>[l("One-time payment. No subscription.")]),_:1})])])])])])])]),_:1})}}};export{se as default};
