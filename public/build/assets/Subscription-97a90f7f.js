import{_ as E}from"./AuthenticatedLayout-528906eb.js";import{T as N,r as v,f as V,a as g,o as n,c as j,w as d,k as c,b as l,n as y,p as o,D as p,u as i,Z as F,d as e,G as z,l as T,F as O,K as P}from"./app-ff6ec338.js";import{_ as D}from"./TextInput-8530188a.js";import{_ as H}from"./InputLabel-a599b044.js";import{_ as I}from"./InputError-569fabe0.js";import"./themeOverrides-9d5c4a9b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-9a120b43.js";import"./Copy-ca33d561.js";import"./PrimaryButton-2e8ef213.js";const L={key:0,class:"max-w-2xl mx-auto text-center"},M={class:"pb-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},q={class:"flex flex-wrap items-stretch justify-center sm:-mx-4"},G={class:"w-full mb-8 px-2 sm:px-4 sm:w-4/5 md:w-3/5 xl:w-1/3 lg:mb-0"},K={class:"h-full flex flex-col p-6 space-y-6 rounded shadow sm:p-8 bg-white border border-solid border-gray-300"},Z={class:"space-y-3"},A={class:"text-2xl font-bold"},J={key:0,class:"text-4xl font-bold"},Q={key:1,class:"text-xl text-gray-600"},R={class:"text-lg text-gray-500"},W={class:"flex-1 mb-6"},X={class:"flex mb-2 space-x-2"},Y=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",class:"flex-shrink-0 w-6 h-6"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1),ee={key:0,class:"mt-4"},te=e("div",{id:"card-errors",class:"mt-[0_!important] px-[15px] pt-1 text-red-600 font-sm",role:"alert"},null,-1),se=e("div",{class:"flex justify-center"},[e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/visa.png",alt:"visa"}),e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/mastercard.png",alt:"mastercard"}),e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/jcb.png",alt:"jcb"}),e("img",{class:"w-10",src:"/imgs/credit_cards/american-express.png",alt:"american-express"})],-1),ae={class:"text-center"},fe={__name:"Subscription",props:{plan:{type:Object},intent:{type:Object},count:{type:Number},stripe_pk:{type:String},message:String},setup(t){const m=t,r=N({plan:m.plan.id,count:m.count,token:""}),u=v(!1),h=v(null),b=window.Stripe(m.stripe_pk),w=b.elements(),k={base:{color:"#32325d",colorPrimary:"#6366f1",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},f=w.create("card",{style:k});function C(s){const a=document.getElementById("card-errors");s.error?a.innerText=s.error.message:a.innerText=""}V(()=>{f.mount(h.value),f.on("change",s=>{C(s)})});const S=async()=>{u.value=!0;const s=m.intent.client_secret,a=await b.confirmCardSetup(s,{payment_method:{type:"card",card:f,billing_details:{name:P().props.auth.user.name}}});a.error?u.value=!1:(console.log("stripe submit success."),r.transform(x=>({...x,token:a.setupIntent.payment_method})).post(route("charge.create"),{onFinish:()=>{u.value=!1}}))};return(s,a)=>{const x=g("n-alert"),$=g("n-button"),B=g("n-text");return n(),j(E,null,{header:d(()=>[t.message?(n(),c("div",L,[l(x,{title:"Card Error!",type:"error",closable:""},{default:d(()=>[y(o(t.message),1)]),_:1})])):p("",!0)]),default:d(()=>[l(i(F),{title:`| Purchase - ${t.plan.name.toUpperCase()}`},null,8,["title"]),e("div",M,[e("div",U,[e("div",q,[e("div",G,[e("div",K,[e("div",Z,[e("h4",A,o(t.plan.name),1),e("span",{class:z(["font-bold",s.$page.props.auth.user.promo_code&&t.plan.account_type==0?"line-through text-2xl text-gray-500 mr-3":"text-primary text-4xl"])},"$"+o(t.plan.price),3),s.$page.props.auth.user.promo_code&&t.plan.account_type==0?(n(),c("span",J,"$"+o(t.plan.price*.8),1)):p("",!0),t.plan.account_type==1&&t.plan.slug!="Beginner"?(n(),c("span",Q,"/Employee x "+o(i(r).count)+" = $"+o(t.plan.price*i(r).count),1)):p("",!0),e("h5",R,o(t.plan.description),1)]),e("ul",W,[(n(!0),c(O,null,T(t.plan.services.split("_"),_=>(n(),c("li",X,[Y,e("span",null,o(_),1)]))),256))]),t.plan.account_type==1&&t.plan.slug!="Beginner"?(n(),c("div",ee,[l(H,{for:"count",value:"Employees"}),l(D,{id:"count",type:"number",min:"10",class:"mt-1 block w-full",modelValue:i(r).count,"onUpdate:modelValue":a[0]||(a[0]=_=>i(r).count=_),required:""},null,8,["modelValue"]),l(I,{class:"mt-2",message:i(r).errors.count},null,8,["message"])])):p("",!0),e("div",{ref_key:"card",ref:h,class:"p-2.5 rounded-md border-2 border-solid"},null,512),te,l($,{type:"button",loading:u.value,class:"bg-primary w-full text-white font-semibold",color:"#FF6E2B",size:"large",onClick:S},{default:d(()=>[y("Pay Now ")]),_:1},8,["loading"]),se,e("div",ae,[l(B,{class:"italic text-gray-400"},{default:d(()=>[y("One-time payment. No subscription.")]),_:1})])])])])])])]),_:1})}}};export{fe as default};
