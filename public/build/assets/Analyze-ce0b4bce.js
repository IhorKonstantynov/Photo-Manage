import{_ as b}from"./AuthenticatedLayout-528906eb.js";import{T as v,r as c,a as l,o as T,c as D,w as i,b as s,u as U,Z as C,d as a,h as $,N as j}from"./app-ff6ec338.js";import"./themeOverrides-9d5c4a9b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-9a120b43.js";import"./Copy-ca33d561.js";import"./TextInput-8530188a.js";import"./PrimaryButton-2e8ef213.js";const z=a("div",{class:"max-w-5xl mx-auto text-center"},[a("h2",{class:"text-xl md:text-2xl font-bold tracking-widest text-black"}," Analyze ")],-1),M={class:"px-3 lg:px-6"},S={class:"flex justify-end flex-wrap"},A={class:"mb-5"},L={class:"p-3"},N=a("span",{class:"text-white"},"Goto",-1),Z={__name:"Analyze",props:{data:{type:Object},search:Object,csrfToken:String},setup(r){const e=r,p=[{title:"SignUps",key:"total_signups",align:"center"},{title:"Sales",key:"tphotos",align:"center"},{title:"$25",key:"tplan1",align:"center"},{title:"$55",key:"tplan2",align:"center"},{title:"$155",key:"tplan3",align:"center"},{title:"Total",key:"tspent",render(t){return $(j,{type:"info",bordered:!1},{default:()=>`$${t.tspent}`})}},{title:"UTM Source",key:"utm_source",align:"center"},{title:"UTM Medium",key:"utm_medium",align:"center"},{title:"UTM Campaign",key:"utm_campaign",align:"center"},{title:"UTM Content",key:"utm_content",align:"center"}],n=v({from:e.search.from,to:e.search.to}),d=c(e.search.from&&e.search.to?[new Date(e.search.from+" 00:00:00").getTime(),new Date(e.search.to+" 00:00:00").getTime()]:null),m=c(e.data.current_page),g=c(e.data.data.filter(t=>t.total_signups>0)),_={Today:[Date.now(),Date.now()],"Last 7 days":()=>{const t=Date.now();return[t-7*24*60*60*1e3,t]},"Last 15 days":()=>{const t=Date.now();return[t-15*24*60*60*1e3,t]},"Last 30 days":()=>{const t=Date.now();return[t-30*24*60*60*1e3,t]}},u=t=>{m.value=t;let o=route("admin.analyze",{page:t});n.get(o,{onFinish:()=>console.log("finished.")})},f=t=>t>Date.now(),h=t=>{t?(n.from=t[0],n.to=t[1]):(n.from=void 0,n.to=void 0),u(1)};return(t,o)=>{const y=l("n-date-picker"),k=l("n-data-table"),x=l("n-pagination");return T(),D(b,null,{header:i(()=>[z]),default:i(()=>[s(U(C),{title:"| Admin - Analyze"}),a("div",M,[a("div",S,[a("div",A,[s(y,{size:"large","is-date-disabled":f,value:d.value,"onUpdate:value":o[0]||(o[0]=w=>d.value=w),type:"daterange",clearable:"",shortcuts:_,"onUpdate:formattedValue":h},null,8,["value"])])]),s(k,{columns:p,data:g.value},null,8,["data"]),a("div",L,[s(x,{class:"justify-end","page-count":r.data.last_page,"show-quick-jumper":"",page:r.data.current_page,"onUpdate:page":u},{goto:i(()=>[N]),_:1},8,["page-count","page"])])])]),_:1})}}};export{Z as default};
