import{_ as T}from"./AuthenticatedLayout-528906eb.js";import{T as $,r as f,f as z,a as n,o as g,c as w,w as a,d as e,n as l,p as I,D as k,b as c,u as C,k as V,G as H,K as U}from"./app-ff6ec338.js";import"./themeOverrides-9d5c4a9b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-9a120b43.js";import"./Copy-ca33d561.js";import"./TextInput-8530188a.js";import"./PrimaryButton-2e8ef213.js";const D={class:"max-w-2xl mx-auto text-center"},M=e("h2",{class:"text-xl font-bold lg:text-2xl text-primary"}," Buy Credits for AI Background Remover.",-1),O={class:"pb-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},G={class:"flex flex-wrap items-stretch justify-center sm:-mx-4"},K={class:"mb-8 px-2 sm:px-4 w-4/5 md:w-3/5 lg:w-2/5 xl:w-1/3 lg:mb-0"},L={class:"h-full flex flex-col p-6 space-y-6 rounded shadow sm:p-8 bg-white border border-solid border-gray-300"},R={class:"space-y-3"},q={key:0},J=e("div",{id:"card-errors",class:"mt-[0_!important] px-[15px] pt-1 text-red-600 font-sm",role:"alert"},null,-1),Q=e("div",{class:"flex justify-center"},[e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/visa.png",alt:"visa"}),e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/mastercard.png",alt:"mastercard"}),e("img",{class:"w-10 mr-1",src:"/imgs/credit_cards/jcb.png",alt:"jcb"}),e("img",{class:"w-10",src:"/imgs/credit_cards/american-express.png",alt:"american-express"})],-1),W={class:"text-center"},re={__name:"Credit",props:{intent:{type:Object},stripe_pk:{type:String},isPayment:{type:Boolean,default:!1},message:String},setup(i){const d=i,v=[{label:"1 credit ($2.99)",value:0},{label:"6 credit ($9.99)",value:1}],m=$({count:v[0].value,token:""}),o=f(!1),x=f(null),r=f(d.isPayment),y=window.Stripe(d.stripe_pk),B=y.elements(),S={base:{color:"#32325d",colorPrimary:"#6366f1",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},u=B.create("card",{style:S});function E(s){const t=document.getElementById("card-errors");s.error?t.innerText=s.error.message:t.innerText=""}z(()=>{u.mount(x.value),u.on("change",s=>{E(s)})});const N=async()=>{if(o.value=!0,r.value)m.transform(s=>({...s,token:null})).post(route("charge.payCredit"),{onFinish:()=>{o.value=!1,document.getElementById("card-errors").innerHTML=d.message}});else{const s=d.intent.client_secret,t=await y.confirmCardSetup(s,{payment_method:{type:"card",card:u,billing_details:{name:U().props.auth.user.name}}});t.error?o.value=!1:(console.log("stripe submit success."),m.transform(p=>({...p,token:t.setupIntent.payment_method})).post(route("charge.payCredit"),{onFinish:()=>{o.value=!1}}))}},h=s=>{r.value=s};return(s,t)=>{const p=n("n-alert"),j=n("n-select"),b=n("n-radio"),F=n("n-button"),P=n("n-text");return g(),w(T,null,{header:a(()=>[e("div",D,[M,i.message?(g(),w(p,{key:0,title:"Card Error!",type:"error",closable:""},{default:a(()=>[l(I(i.message),1)]),_:1})):k("",!0)])]),default:a(()=>[e("div",O,[e("div",A,[e("div",G,[e("div",K,[e("div",L,[e("div",R,[e("div",null,[c(j,{value:C(m).count,"onUpdate:value":t[0]||(t[0]=_=>C(m).count=_),options:v,size:"large",placeholder:"Credit amount"},null,8,["value"])])]),i.isPayment?(g(),V("div",q,[c(b,{checked:r.value,value:!0,name:"card-option",onChange:t[1]||(t[1]=_=>h(!0))},{default:a(()=>[l(" Use previous card. ")]),_:1},8,["checked"]),c(b,{checked:!r.value,value:!1,name:"card-option",onChange:t[2]||(t[2]=_=>h(!1))},{default:a(()=>[l(" Use new card. ")]),_:1},8,["checked"])])):k("",!0),e("div",{class:H(r.value?"hidden":"")},[e("div",{ref_key:"card",ref:x,class:"p-2.5 rounded-md border-2 border-solid"},null,512),J],2),c(F,{type:"button",loading:o.value,class:"bg-primary w-full text-white font-semibold",color:"#FF6E2B",size:"large",onClick:N},{default:a(()=>[l("Pay Now ")]),_:1},8,["loading"]),Q,e("div",W,[c(P,{class:"italic text-gray-400"},{default:a(()=>[l("One-time payment. No subscription.")]),_:1})])])])])])])]),_:1})}}};export{re as default};
